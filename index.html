<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Czysta Woda â€” Sortuj odpady</title>

<style>
:root{
  --bg:#eef6ff;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --line:#cfe0f2;
  --good:#0ea5a4;
  --bad:#e11d48;
  --special:#7c3aed;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(180deg,#eef6ff,#f8fbff);
  color:var(--text);
  display:flex;
  min-height:100vh;
}

.app{
  margin:auto;
  width:min(420px,94vw);
  padding:16px;
}

h1{ margin:0 0 6px 0; font-size:22px; }
p.subtitle{
  margin:0 0 12px 0;
  color:var(--muted);
  font-size:14px;
  line-height:1.35;
}

.panel{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px;
  margin-bottom:12px;
}

.stats{
  display:flex;
  justify-content:space-between;
  font-size:14px;
}

.item{
  margin:14px 0 10px;
  text-align:center;
}
.item .emoji{ font-size:64px; }
.item .name{ margin-top:6px; font-weight:800; }

.bins{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:10px;
}

.bin{
  border-radius:14px;
  padding:12px;
  text-align:center;
  font-weight:800;
  color:#fff;
  cursor:pointer;
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.bin small{
  display:block;
  font-weight:500;
  opacity:.95;
  margin-top:4px;
  font-size:12px;
}

.yellow{background:#facc15;color:#3f2d00}
.blue{background:#38bdf8}
.green{background:#22c55e}
.black{background:#111827}

/* Nowy: Punkt zbiÃ³rki */
.special{
  background:var(--special);
  grid-column: 1 / 3; /* na caÅ‚Ä… szerokoÅ›Ä‡ */
}
.special small{ opacity:.92; }

.toast{
  margin-top:10px;
  padding:10px;
  border-radius:12px;
  font-size:14px;
  display:none;
  line-height:1.35;
}
.toast.good{background:#ecfeff;color:#065f46;border:1px solid rgba(14,165,164,.25)}
.toast.bad{background:#fff1f2;color:#881337;border:1px solid rgba(225,29,72,.22)}

button{
  width:100%;
  margin-top:12px;
  padding:12px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:900;
  background:#0ea5a4;
  color:#fff;
}
</style>
</head>

<body>
<div class="app">
  <h1>Czysta Woda</h1>
  <p class="subtitle">Sortuj odpady, aby chroniÄ‡ wodÄ™. NiektÃ³re odpady (np. baterie, olej) oddaj do punktu zbiÃ³rki.</p>

  <div class="panel">
    <div class="stats">
      <div>â±ï¸ <span id="time">60</span>s</div>
      <div>ğŸ’§ <span id="score">0</span></div>
    </div>

    <div class="item">
      <div class="emoji" id="itemEmoji">ğŸ¥¤</div>
      <div class="name" id="itemName">butelka plastikowa</div>
    </div>

    <div class="bins">
      <div class="bin yellow" onclick="choose('plastic')">
        ğŸŸ¨ Å»Ã³Å‚ty
        <small>plastik i metal</small>
      </div>
      <div class="bin blue" onclick="choose('paper')">
        ğŸŸ¦ Niebieski
        <small>papier</small>
      </div>
      <div class="bin green" onclick="choose('glass')">
        ğŸŸ© Zielony
        <small>szkÅ‚o</small>
      </div>
      <div class="bin black" onclick="choose('mixed')">
        âš« Czarny
        <small>zmieszane</small>
      </div>

      <!-- NOWE: poprawna opcja dla baterii/oleju/farb itp. -->
      <div class="bin special" onclick="choose('special')">
        â™»ï¸ Punkt zbiÃ³rki (PSZOK)
        <small>odpady niebezpieczne / specjalne</small>
      </div>
    </div>

    <div id="toast" class="toast"></div>
  </div>

  <button onclick="start()">Start / Zagraj ponownie</button>
</div>

<script>
/*
  typy:
  - plastic  (Å¼Ã³Å‚ty)
  - paper    (niebieski)
  - glass    (zielony)
  - mixed    (czarny)
  - special  (punkt zbiÃ³rki / PSZOK)
*/

const items = [
  // klasyczne
  {name:"butelka plastikowa", emoji:"ğŸ¥¤", type:"plastic",
    fact:"Plastik w rzece rozpada siÄ™ na mikroplastik."},
  {name:"puszka", emoji:"ğŸ¥«", type:"plastic",
    fact:"Metal i plastik segregujemy do Å¼Ã³Å‚tego pojemnika."},
  {name:"gazeta", emoji:"ğŸ“°", type:"paper",
    fact:"Papier moÅ¼na skutecznie poddaÄ‡ recyklingowi."},
  {name:"sÅ‚oik", emoji:"ğŸ«™", type:"glass",
    fact:"SzkÅ‚o moÅ¼na przetwarzaÄ‡ nieskoÅ„czenie wiele razy."},
  {name:"butelka szklana", emoji:"ğŸ¾", type:"glass",
    fact:"SzkÅ‚o nie traci jakoÅ›ci w recyklingu."},
  {name:"zabrudzona chusteczka", emoji:"ğŸ§»", type:"mixed",
    fact:"Brudne, mokre odpady czÄ™sto trafiajÄ… do zmieszanych."},
  {name:"resztki jedzenia", emoji:"ğŸŒ", type:"mixed",
    fact:"Odpady organiczne nie powinny trafiaÄ‡ do kanalizacji ani wÃ³d."},

  // nowe 2â€“3+ sztuki (dodaÅ‚em 4)
  {name:"karton po mleku/soku", emoji:"ğŸ¥›", type:"plastic",
    fact:"Karton wielomateriaÅ‚owy czÄ™sto wrzuca siÄ™ do Å¼Ã³Å‚tego."},
  {name:"folia aluminiowa", emoji:"ğŸ§»", type:"plastic",
    fact:"Metale i opakowania wielomateriaÅ‚owe zwykle trafiajÄ… do Å¼Ã³Å‚tego."},

  // specjalne / niebezpieczne
  {name:"bateria", emoji:"ğŸ”‹", type:"special",
    fact:"Baterie oddaj do punktu zbiÃ³rki â€” nie do zwykÅ‚ych koszy."},
  {name:"olej spoÅ¼ywczy", emoji:"ğŸ›¢ï¸", type:"special",
    fact:"Olej wylany do zlewu zanieczyszcza wodÄ™ pitnÄ…."},
  {name:"farba/chemikalia", emoji:"ğŸ§´", type:"special",
    fact:"Chemikalia mogÄ… zatruwaÄ‡ wodÄ™ â€” oddaj do PSZOK."},
  {name:"Å¼arÃ³wka", emoji:"ğŸ’¡", type:"special",
    fact:"Å»arÃ³wki i elektroodpady oddaje siÄ™ do specjalnych punktÃ³w."}
];

let score = 0;
let time = 60;
let current = null;
let timer = null;
let lastIndex = -1;

function randomItem(){
  // anty-powtÃ³rka: Ğ½Ğµ Ğ´Ğ°Ñ‘Ğ¼ Ğ²Ñ‹Ğ¿Ğ°Ğ´Ğ°Ñ‚ÑŒ Ñ‚Ğ¾Ğ¼Ñƒ Ğ¶Ğµ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñƒ Ğ¿Ğ¾Ğ´Ñ€ÑĞ´
  if(items.length === 1){
    lastIndex = 0;
  } else {
    let idx = Math.floor(Math.random() * items.length);
    let guard = 0;
    while(idx === lastIndex && guard < 20){
      idx = Math.floor(Math.random() * items.length);
      guard++;
    }
    lastIndex = idx;
  }
  current = items[lastIndex];
  itemEmoji.textContent = current.emoji;
  itemName.textContent = current.name;
}

function showToast(text, good){
  const t = document.getElementById("toast");
  t.textContent = text;
  t.className = "toast " + (good ? "good" : "bad");
  t.style.display = "block";
  setTimeout(() => t.style.display = "none", 1700);
}

function choose(bin){
  if(!current) return;

  let pts = 0;

  // Ğ•ÑĞ»Ğ¸ Ñ‚ĞµĞºÑƒÑ‰Ğ¸Ğ¹ item = special (Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹), Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ "special"
  if(current.type === "special"){
    if(bin === "special"){
      pts = 10;
      showToast("âœ… Dobrze! " + current.fact, true);
    } else {
      pts = -15;
      showToast("âŒ Å¹le! To pamiÄ™taj: " + current.fact, false);
    }
  } else {
    // Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğµ Ğ¾Ñ‚Ñ…Ğ¾Ğ´Ñ‹: Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ°Ñ ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ
    if(bin === current.type){
      pts = 10;
      showToast("âœ… Dobrze! " + current.fact, true);
    } else if(bin === "special"){
      // ĞµÑĞ»Ğ¸ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ» Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğ¹ Ğ¼ÑƒÑĞ¾Ñ€ Ğ² PSZOK â€” ÑÑ‚Ğ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°, Ğ½Ğ¾ Ğ¼ÑĞ³ĞºĞ°Ñ
      pts = -5;
      showToast("âŒ To nie jest odpad specjalny. SprÃ³buj wÅ‚aÅ›ciwego kosza.", false);
    } else {
      pts = -5;
      showToast("âŒ NieprawidÅ‚owa segregacja moÅ¼e zanieczyszczaÄ‡ wodÄ™.", false);
    }
  }

  score = Math.max(0, score + pts);
  document.getElementById("score").textContent = score;

  randomItem();
}

function start(){
  clearInterval(timer);

  score = 0;
  time = 60;
  lastIndex = -1;

  document.getElementById("score").textContent = "0";
  document.getElementById("time").textContent = "60";

  randomItem();

  timer = setInterval(() => {
    time--;
    document.getElementById("time").textContent = time;

    if(time <= 0){
      clearInterval(timer);

      alert(
        "Koniec!\n" +
        "ğŸ’§ Wynik: " + score + "\n\n" +
        "3 wskazÃ³wki:\n" +
        "â€¢ Segreguj odpady.\n" +
        "â€¢ Nie wylewaj oleju do zlewu.\n" +
        "â€¢ Oddawaj baterie i chemiÄ™ do punktÃ³w zbiÃ³rki (PSZOK)."
      );
      current = null;
    }
  }, 1000);
}
</script>
</body>
</html>
